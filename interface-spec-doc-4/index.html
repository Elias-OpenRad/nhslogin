<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <base href="/nhslogin">
     <link rel="stylesheet"  href="nhslogin/css/main.css">
      <link rel="stylesheet"  href="nhslogin/css/mobile-menu.css">
    <script src="nhslogin/js/main.min.js" ></script> 
<link rel="shortcut icon" href="/nhslogin/images/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/nhslogin/images/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="/nhslogin/images/apple-touch-icon-180x180.png">
<link rel="mask-icon" href="/nhslogin/images/favicon.svg" color="#005eb8">
<link rel="icon" sizes="192x192" href="/nhslogin/images/favicon-192x192.png">

<title>4 Tokens</title>
  </head>
  <body>
      <header class="nhsuk-header" role="banner">
        <div class="nhsuk-width-container nhsuk-header__container">
          <div class="nhsuk-header__logo">
            <a class="nhsuk-header__link nhsuk-header__link--service " href="/nhslogin" aria-label="NHS digital service manual homepage">
              <svg class="nhsuk-logo" xmlns="http://www.w3.org/2000/svg" role="presentation" focusable="false" viewBox="0 0 40 16">
                <path class="nhsuk-logo__background" d="M0 0h40v16H0z"></path>
                <path class="nhsuk-logo__text" d="M3.9 1.5h4.4l2.6 9h.1l1.8-9h3.3l-2.8 13H9l-2.7-9h-.1l-1.8 9H1.1M17.3 1.5h3.6l-1 4.9h4L25 1.5h3.5l-2.7 13h-3.5l1.1-5.6h-4.1l-1.2 5.6h-3.4M37.7 4.4c-.7-.3-1.6-.6-2.9-.6-1.4 0-2.5.2-2.5 1.3 0 1.8 5.1 1.2 5.1 5.1 0 3.6-3.3 4.5-6.4 4.5-1.3 0-2.9-.3-4-.7l.8-2.7c.7.4 2.1.7 3.2.7s2.8-.2 2.8-1.5c0-2.1-5.1-1.3-5.1-5 0-3.4 2.9-4.4 5.8-4.4 1.6 0 3.1.2 4 .6"></path>
                <image src="https://assets.nhs.uk/images/nhs-logo.png" xlink:href=""></image>
              </svg>
              <span class="nhsuk-header__service-name">
              NHS login - developer documentation
            </span>
            </a>
          </div>
          <div class="nhsuk-header__menu">
            <button class="nhsuk-header__menu-toggle" id="toggle-menu" aria-controls="header-navigation" aria-label="Open menu">Menu</button>
          </div>

          <div class="nhsuk-header__content" id="content-header"></form>
        </div>
      </div>
    </div>
  </div>
  <nav class="nhsuk-header__navigation mobile-menu" id="header-navigation" role="navigation" aria-label="Primary navigation"
  aria-labelledby="label-navigation">
  <div class="nhsuk-width-container">
    <p class="nhsuk-header__navigation-title"><span id="label-navigation">Menu</span>
      <button class="nhsuk-header__navigation-close" id="close-menu">
        <svg class="nhsuk-icon nhsuk-icon__close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          aria-hidden="true" focusable="false">
          <path
            d="M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z">
          </path>
        </svg>
        <span class="nhsuk-u-visually-hidden">Close menu</span>
      </button>
    </p>
    <ul class="nhsuk-header__navigation-list">
      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          NHS login
        </h2>
      </li>
      <li class="nhsuk-header__navigation-item nhsuk-header__navigation-item--for-mobile">
        <a class="nhsuk-header__navigation-link" href="/">
          What is NHS login
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/oidc-login-flow">
          The OIDC login flow
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          Tesing NHS login
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/test-login-service">
          Test Environments
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>
      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/integrating-to-sandpit">
          Integrate to the sandpit
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>
      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/generating-pem">
          Generating public key
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          External Interface Specification
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/interface-spec-doc">
          Interface Specification Document
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          Conformance
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/technical-conformance">
          Technical Conformance
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          Developer Support Information
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/developer-support">
          Developer Support
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

       <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          GP Credentials
        </h2>
      </li>

       <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/gp-credentials-para">
          Using NHS login to create or retrieve GP credentials
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/gp-credentials-doc">
          Scope and processing overview
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          Button Guidance
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/adding-buttons">
          Adding the NHS login button to your service
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>

      <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          NHS login user settings
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/linking-to-settings-para">
          Settings information
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>


       <li>
        <h2 class="app-side-nav__heading mobile-menu__heading">
          Examples
        </h2>
      </li>

      <li class="nhsuk-header__navigation-item">
        <a class="nhsuk-header__navigation-link" href="/nhslogin/example-oidc">
          Example OIDC clients
          <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
            aria-hidden="true">
            <path
              d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z">
            </path>
          </svg>
        </a>
      </li>
    </ul>
  </div>
</nav>
</header>

<div class="nhsuk-width-container">
  <main class="nhsuk-main-wrapper app-main-wrapper" id="maincontent">

    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-full app-component-reading-width">

        <div class="app-pane">

         <div class="app-pane__side-bar">

            <nav class="app-side-nav">
            
                <h2 class="app-side-nav__heading">NHS login</h2>
                <ul class="nhsuk-list app-side-nav__list">

                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="/nhslogin">What is NHS login?</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/oidc-login-flow">The OIDC login flow</a>
                  </li>
                </ul>
                <h2 class="app-side-nav__heading">Integrating with NHS login</h2>
                <ul class="nhsuk-list app-side-nav__list">

                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="/nhslogin/integration-process">The NHS login integration process</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/adding-buttons">Adding the NHS login button to your service</a>
                  </li>
                </ul>
                <h2 class="app-side-nav__heading">Testing NHS login</h2>
                <ul class="nhsuk-list app-side-nav__list">

                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="/nhslogin/test-login-service">Test environments</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/integrating-to-sandpit">Integrate to the sandpit</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/generating-pem">Generate public key</a>
                  </li>
                </ul>
                <h2 class="app-side-nav__heading">External Interface Specification</h2>
                <ul class="nhsuk-list app-side-nav__list">

                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/interface-spec-doc">Interface Specification Document</a>
                </ul>

                <h2 class="app-side-nav__heading">Conformance</h2>
                <ul class="nhsuk-list app-side-nav__list">

                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/technical-conformance">Technical Conformance</a>
                  </li>
                </ul>

                <h2 class="app-side-nav__heading">Developer Support Information</h2>
                <ul class="nhsuk-list app-side-nav__list">

                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/developer-support">Developer Support</a>
                  </li>
                </ul>
                <h2 class="app-side-nav__heading">Features</h2>
                <ul class="nhsuk-list app-side-nav__list">
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/gp-credentials">GP credentials</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/linking-to-settings">NHS login user settings</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/single-sign-on">Single Sign On</a>
                  </li>
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/vectors-of-trust">Vectors of Trust</a>
                  </li>
                </ul>
                <h2 class="app-side-nav__heading">Examples</h2>
                <ul class="nhsuk-list app-side-nav__list">
                  <li class="app-side-nav__item">
                    <a class="app-side-nav__link" href="nhslogin/example-oidc">Example OIDC clients</a>
                  </li>
                </ul>
            </nav>
          </div>


          <div class="app-pane__main-content">

            <h1 class="app-page-heading">
              4 Tokens
            </h1>

            <p>An ID Token is a security token that contains Claims about the Authentication of an End-User by the Platform, when using a Client and potentially other requested Claims. The Access Token is a credential that can be used by an application to access an API – initially the UserInfo endpoint.</p>
<p>The NHS login Platform uses signed JSON Web Tokens (JWTs) for ID Tokens and Access Tokens.</p>
<hr>
<h2>4.1 JWT Header</h2>
<p>References:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc7519">RFC7519 – JSON Web Token (JWT)</a></li>
<li><a href="https://tools.ietf.org/html/rfc7515">RFC7515 – JSON Web Signature (JWS)</a></li>
</ul>
<p>The JWT header will contain the following claims:</p>
<dl><dt>Table 15 - JWT Header</dt></dl>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Req?</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alg</code></td>
<td>mand</td>
<td>Algorithm used for <br>signing the JWT</td>
<td><code>RS512</code> – <code>RSASSA-PKCS1-v1_5</code> <br>with the <code>SHA-512</code> hash algorithm</td>
</tr>
<tr>
<td><code>typ</code></td>
<td>mand</td>
<td>Type</td>
<td>&quot;JWT&quot;</td>
</tr>
<tr>
<td><code>jku</code></td>
<td>n/a</td>
<td>JWK Set URL</td>
<td>Not supported, keys are <br>communicated outside the JWT, <br>see <a href="https://tools.ietf.org/html/rfc7519">RFC7519 – JSON Web Token (JWT)</a>, s2</td>
</tr>
<tr>
<td><code>jwk</code></td>
<td>n/a</td>
<td>JSON Web Key</td>
<td>Not supported, keys are <br>communicated outside the JWT, <br>see <a href="https://tools.ietf.org/html/rfc7519">RFC7519 – JSON Web Token (JWT)</a>, s2</td>
</tr>
<tr>
<td><code>x5u</code></td>
<td>n/a</td>
<td>X.509 URL</td>
<td>Not supported, keys are <br>communicated outside the JWT, <br>see <a href="https://tools.ietf.org/html/rfc7519">RFC7519 – JSON Web Token (JWT)</a>, s2</td>
</tr>
<tr>
<td><code>x5c</code></td>
<td>n/a</td>
<td>X.509 Certificate Chain</td>
<td>Not supported, keys are <br>communicated outside the JWT, <br>see <a href="https://tools.ietf.org/html/rfc7519">RFC7519 – JSON Web Token (JWT)</a>, s2</td>
</tr>
</tbody>
</table>
<p>The JWT header <strong>may</strong> contain other Claims. Any Claims used that are not understood <strong>must</strong> be ignored by the RP.</p>
<hr>
<h2>4.2 ID Token Payload</h2>
<p>References:</p>
<ul>
<li><a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect Core Specification</a></li>
</ul>
<p>The following Claims are used within the ID Token for all Oauth 2.0 flows used by OpenID Connect:</p>
<dl><dt>Table 16.1 - id_token claims, standard</dt></dl>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Req?</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>iss</code></td>
<td>mand</td>
<td>Issuer Identifier for the Issuer of the response</td>
<td>The <code>iss</code> value is a case sensitive URL using the https scheme that contains scheme, host, and optionally, port number and path components and no query or fragment components.</td>
</tr>
<tr>
<td><code>sub</code></td>
<td>mand</td>
<td>Subject Identifier</td>
<td>A locally unique and never reassigned identifier within the Issuer for the End-User, which is intended to be consumed by the Client, e.g., <code>24400320</code> or <code>AitOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4</code>. <br>It <strong>shall not</strong> exceed 255 ASCII characters in length. <br> The <code>sub</code> value is a case sensitive string.</td>
</tr>
<tr>
<td><code>aud</code></td>
<td>mand</td>
<td>Audience(s) that this ID Token is intended for</td>
<td>It <strong>shall</strong> contain the Oauth 2.0 <code>client_id</code> of the Partner Services as an audience value. It <strong>may</strong> also contain identifiers for other audiences. <br>In the general case, the <code>aud</code> value is an array of case sensitive strings. <br>In the common special case when there is one audience, the <code>aud</code> value <strong>shall</strong> be a single case sensitive string.</td>
</tr>
<tr>
<td><code>exp</code></td>
<td>mand</td>
<td>Expiration time on or after which the ID Token <strong>must not</strong> be accepted for processing</td>
<td>The processing of this parameter requires that the current date/time <strong>must</strong> be before the expiration date/time listed in the value. <br>Implementers <strong>may</strong> provide for some small leeway, usually no more than a few minutes, to account for clock skew. <br>Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. <br>See <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a> for details regarding date/times in general and UTC in particular.</td>
</tr>
<tr>
<td><code>iat</code></td>
<td>mand</td>
<td>Time at which the JWT was issued</td>
<td>Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. <br>See <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a> for details regarding date/times in general and UTC in particular.</td>
</tr>
<tr>
<td><code>jti</code></td>
<td>mand</td>
<td>JWT unique identifier</td>
<td>Value is unique to each token created by the issuer.</td>
</tr>
<tr>
<td><code>auth_time</code></td>
<td>cond</td>
<td>Time when the End-User authentication occurred</td>
<td>Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. <br>When a <code>max_age</code> request is made or when <code>auth_time</code> is requested as an Essential Claim, then this Claim is <strong>required</strong>; otherwise, its inclusion is <strong>OPTIONAL</strong>. <br>(The <code>auth_time</code> Claim semantically corresponds to the <a href="http://openid.net/specs/openid-provider-authentication-policy-extension-1_0.html">OpenID 2.0 PAPE</a> <code>auth_time</code> response parameter).</td>
</tr>
<tr>
<td><code>nonce</code></td>
<td>cond</td>
<td>String value used to associate a Client session with an ID Token, and to mitigate replay attacks</td>
<td>The value is passed through unmodified from the Authentication Request to the ID Token. <br>If present in the ID Token, Clients <strong>must</strong> verify that the nonce Claim Value is equal to the value of the nonce parameter sent in the Authentication Request. <br>If present in the Authentication Request, the Platform <strong>must</strong> include a nonce Claim in the ID Token with the Claim Value being the nonce value sent in the Authentication Request. <br>The Platform will perform no other processing on nonce values used. <br>The nonce value is a case sensitive string.</td>
</tr>
<tr>
<td><code>acr</code></td>
<td>n/a</td>
<td>Authentication Context Class Reference</td>
<td>Not supported - superseded by <code>vot</code>.</td>
</tr>
<tr>
<td><code>amr</code></td>
<td>n/a</td>
<td>Authentication Methods References</td>
<td>Not currently supported.</td>
</tr>
<tr>
<td><code>azp</code></td>
<td>n/a</td>
<td>Authorized party – the party to which the ID Token was issued</td>
<td>Not currently supported.</td>
</tr>
<tr>
<td><code>vot</code></td>
<td>mand</td>
<td>Vectors of Trust</td>
<td>The level to which the user’s identity has been verified. <br>See <a href="https://nhsconnect.github.io/nhslogin/interface-spec-doc-5">5.1 Vectors of Trust</a> for values.</td>
</tr>
<tr>
<td><code>vtm</code></td>
<td>mand</td>
<td>Vector Trust Mark</td>
<td>https URI of the vtm claim <br>See <a href="https://nhsconnect.github.io/nhslogin/interface-spec-doc-5">5.1.5 Trustmark</a>.</td>
</tr>
<tr>
<td><code>family_name</code></td>
<td>cond</td>
<td>Family Name</td>
<td>Surname(s) or last name(s) of the End-User</td>
</tr>
<tr>
<td><code>birthdate</code></td>
<td>cond</td>
<td>Birthdate</td>
<td>If the user’s date of birth is available, it is returned in ISO8601‑2004 format, YYYY-MM-DD.</td>
</tr>
</tbody>
</table>
<dl><dt>Table 16.2 - id_token claims, NHS login extensions</dt></dl>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Req?</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nhs_number</code></td>
<td>cond</td>
<td>NHS Number</td>
<td>If the user’s NHS Number is known, then it <strong>shall</strong> be included (subject to the profile scope being requested). <br>Will be represented as a 10-digit string.</td>
</tr>
<tr>
<td><code>identity_proofing_level</code></td>
<td>cond</td>
<td>Identity Proofing Level</td>
<td>User’s identity proofing level <strong>shall</strong> be included (subject to the profile scope being requested). <br>It will contain one of the values defined in <a href="https://nhsconnect.github.io/nhslogin/interface-spec-doc-5">5.1.1 Verification of Identity Levels</a> and Table 18 – e.g. “P0”, “P9”.</td>
</tr>
</tbody>
</table>
<p>ID Tokens <strong>may</strong> contain other Claims. Any Claims used that are not understood <strong>must</strong> be ignored by the RP.</p>
<p>The following is a non-normative example of the set of Claims (the JWT Claims Set) in an ID Token:</p>
<pre class="language-html"><code class="language-html">  {<br>   “iss”: “ https://auth.login.nhs.uk”,<br>   “sub”: “24400320”,<br>   “aud”: “s6BhdRkqt3”,<br>   “nonce”: “n-0S6_WzA2Mj”,<br>   “exp”: 1311281970,<br>   “iat”: 1311280970,<br>   “auth_time”: 1311280969,<br>   “vot”: “P9.Ca.Cc”,	<br>   “vtm”: “https://auth.login.nhs.uk/trustmark/auth.login.nhs.uk”<br>   “nhs_number”: “4447685222”,<br>   “birthdate”: “2001-12-30”,<br>   “family_name”: “Johnson”,<br>   “identity_proofing_level”: “P9”<br>  }</code></pre>
<hr>
<h2>4.3 Access Token Payload</h2>
<p>References:</p>
<ul>
<li><a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect Core Specification</a></li>
<li><a href="https://developer.nhs.uk/apis/spine-core/security_jwt.html">Access Tokens and Audit (JWT)</a></li>
</ul>
<dl><dt>Table 17.1 - access_token claims, standard</dt></dl>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Req?</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>iss</code></td>
<td>mand</td>
<td>Issuer Identifier for the Issuer of the response</td>
<td>The iss value is a case sensitive URL using the https scheme that contains scheme, host, and optionally, port number and path components and no query or fragment components.</td>
</tr>
<tr>
<td><code>sub</code></td>
<td>mand</td>
<td>Subject Identifier</td>
<td>A locally unique and never reassigned identifier within the Issuer for the End-User, which is intended to be consumed by the Client, e.g., <code>24400320</code> or <code>AitOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4</code>. <br>It <strong>shall not</strong> exceed 255 ASCII characters in length. <br>The <code>sub</code> value is a case sensitive string.</td>
</tr>
<tr>
<td><code>aud</code></td>
<td>mand</td>
<td>Audience(s) that this ID Token is intended for</td>
<td>It <strong>shall</strong> contain the Oauth 2.0 <code>client_id</code> of the Partner Service as an audience value. It <strong>may</strong> also contain identifiers for other audiences. <br>In the general case, the <code>aud</code> value is an array of case sensitive strings. <br>In the common special case when there is one audience, the <code>aud</code> value <strong>shall</strong> be a single case sensitive string.</td>
</tr>
<tr>
<td><code>exp</code></td>
<td>mand</td>
<td>Expiration time on or after which the ID Token <strong>must not</strong> be accepted for processing</td>
<td>The processing of this parameter requires that the current date/time <strong>must</strong> be before the expiration date/time listed in the value. <br>Implementers <strong>may</strong> provide for some small leeway, usually no more than a few minutes, to account for clock skew. <br>Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. <br>See <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a> for details regarding date/times in general and UTC in particular.</td>
</tr>
<tr>
<td><code>iat</code></td>
<td>mand</td>
<td>Time at which the JWT was issued</td>
<td>Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. <br>See <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a> for details regarding date/times in general and UTC in particular.</td>
</tr>
<tr>
<td><code>jti</code></td>
<td>mand</td>
<td>JWT unique identifier</td>
<td>Value is unique to each token created by the issue.</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>mand</td>
<td>Scopes that the <code>access_token</code> provides access to</td>
<td>A space-separated list of scopes for which the token is issued. <br>This list will be scopes requested in the authentication request (see <a href="https://nhsconnect.github.io/nhslogin/interface-spec-doc-3/">3.4.1 Authentication request</a>) or a subset of them.</td>
</tr>
<tr>
<td><code>auth_time</code></td>
<td>cond</td>
<td>Time when the End-User authentication occurred</td>
<td>Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. <br>When a max_age request is made or when <code>auth_time</code> is requested as an Essential Claim, then this Claim is <strong>required</strong>; otherwise, its inclusion is <strong>OPTIONAL</strong>. (The <code>auth_time</code> Claim semantically corresponds to the <a href="http://openid.net/specs/openid-provider-authentication-policy-extension-1_0.html">OpenID 2.0 PAPE</a> <code>auth_time</code> response parameter.)</td>
</tr>
<tr>
<td><code>acr</code></td>
<td>n/a</td>
<td>Authentication Context Class Reference</td>
<td>Not supported – superseded by <code>vot</code>.</td>
</tr>
<tr>
<td><code>vot</code></td>
<td>mand</td>
<td>Vectors of Trust</td>
<td>The level to which the user’s identity has been verified. <br>See <a href="https://nhsconnect.github.io/nhslogin/interface-spec-doc-5/">5.1 Vectors of Trust</a> for values.</td>
</tr>
<tr>
<td><code>vtm</code></td>
<td>mand</td>
<td>Vector Trust Mark</td>
<td>https URI of the <code>vtm</code> claim <br>See <a href="https://nhsconnect.github.io/nhslogin/interface-spec-doc-5/">5.1.5 Trustmark</a></td>
</tr>
</tbody>
</table>
<dl><dt>Table 17.2 - access_token claims, NHS login extensions</dt></dl>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Req?</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nhs_number</code></td>
<td>cond</td>
<td>NHS Number</td>
<td>If the user’s NHS Number is known, then it <strong>shall</strong> be included (subject to the profile scope being requested). <br>Will be represented as a 10-digit string.</td>
</tr>
</tbody>
</table>
<dl><dt>Table 17.3 - access_token claims, Spine Core extensions</dt></dl>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Req?</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reason_for_request</code></td>
<td>opt</td>
<td>The identified the purpose for which the request is being made.</td>
<td>Purpose for which access is being requested. Will contain <code>patientaccess</code>. <br>See <a href="https://developer.nhs.uk/apis/spine-core/security_jwt.html">Access Tokens and Audit (JWT)</a>.</td>
</tr>
<tr>
<td><code>requesting_system</code></td>
<td>opt</td>
<td>Identifier for the system or device making the request</td>
<td>This is an identifier for the deployed client system that has been authorised to make API calls. <br>In the case of Spine-enabled clients (or those using the SSP to broker API calls), this will be a Spine Accredited System ID (ASID). <br>The naming system prefix for the ASID will be <a href="https://fhir.nhs.uk/Id/accredited-system">https://fhir.nhs.uk/Id/accredited-system</a>. <br>See <a href="https://developer.nhs.uk/apis/spine-core/security_jwt.html">Access Tokens and Audit (JWT)</a>.</td>
</tr>
<tr>
<td><code>requesting_patient</code></td>
<td>opt</td>
<td>NHS Number</td>
<td>If this authorisation relates to a citizen, this attribute will hold the NHS Number of the citizen. <br>The naming system prefix for the NHS Number will be <a href="http://fhir.nhs.net/Id/nhs-number">http://fhir.nhs.net/Id/nhs-number</a>. <br>See <a href="https://developer.nhs.uk/apis/spine-core/security_jwt.html">Access Tokens and Audit (JWT)</a>.</td>
</tr>
</tbody>
</table>
<p>Access Tokens <strong>may</strong> contain other Claims. Any Claims used that are not understood <strong>must</strong> be ignored by the RP.</p>
<hr>
<h2>4.4 JOSE Signing</h2>
<p>References:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc7519">RFC7519 – JSON Web Token (JWT)</a></li>
<li><a href="https://tools.ietf.org/html/rfc7515">RFC7515 – JSON Web Signature (JWS)</a></li>
</ul>
<p>The JWT will be signed using the RSASSA-PKCS1-v1_5 with the SHA-512 hash algorithm (“RS512”)</p>


     <div class="app-edit-instructions">
              <hr />
              <p>Edit <a href="https://github.com/nhsconnect/nhslogin/blob/master/./src/interface-spec-doc-4.md">this page</a> on GitHub
              </p>
      </div>

            <div class="app-index-navigation app-u-hide-desktop">
              <nav class="app-side-nav">
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<footer role="contentinfo">
  <div class="nhsuk-footer" id="nhsuk-footer">
    <div class="nhsuk-width-container">
      <h2 class="nhsuk-u-visually-hidden">Support links</h2>
      <ul class="nhsuk-footer__list">
        <li class="nhsuk-footer__list-item">
          <a class="nhsuk-footer__list-item-link" href="https://github.com/nhsconnect/nhslogin">Github</a>
        </li>
       <li class="nhsuk-footer__list-item">
          <a class "nhsuk-footer__list-item-link" href="https://nhs-login-support-slack-invite.herokuapp.com/">Slack</a>
        </li>
       <li class="nhsuk-footer__list-item">
          <a class "nhsuk-footer__list-item-link" href="mailto:engage.nhslogin@nhs.net">engage.nhslogin@nhs.net</a>
        </li>
      </ul>
      <p class="nhsuk-footer__copyright">© Crown copyright</p>
    </div>
  </div>
  <div class="app-ogl-footer">
    <div class="nhsuk-width-container"></div>
  </div>
</footer>
<script src="nhslogin/js/mobile-menu.js" ></script> 
</body>
</html>
